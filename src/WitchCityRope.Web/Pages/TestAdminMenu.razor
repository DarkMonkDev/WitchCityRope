@page "/test-admin-menu"
@using WitchCityRope.Core.DTOs
@inject IAuthService AuthService

<h3>Test Admin Menu Visibility</h3>

@if (_currentUser != null)
{
    <div class="test-info">
        <h4>Current User Info:</h4>
        <ul>
            <li>Email: @_currentUser.Email</li>
            <li>Display Name: @_currentUser.DisplayName</li>
            <li>Scene Name: @_currentUser.SceneName</li>
            <li>IsAdmin: @_currentUser.IsAdmin</li>
            <li>Roles: @string.Join(", ", _currentUser.Roles ?? new List<string>())</li>
        </ul>
    </div>
}
else
{
    <p>No user logged in</p>
}

<style>
    .test-info {
        background: #f5f5f5;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
    }
    
    .test-info ul {
        list-style: none;
        padding: 0;
    }
    
    .test-info li {
        padding: 5px 0;
        border-bottom: 1px solid #ddd;
    }
</style>

@code {
    private UserDto? _currentUser;

    protected override async Task OnInitializedAsync()
    {
        _currentUser = await AuthService.GetCurrentUserAsync();
    }
}