# WitchCityRope Staging Environment Configuration
# Copy this file to .env.staging and update with your actual values
# Generated: {GENERATED_DATE}

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DATABASE_HOST={DB_HOST}
DATABASE_PORT={DB_PORT}
DATABASE_NAME=witchcityrope_staging
DATABASE_USER={DB_USER}
DATABASE_PASSWORD={DB_PASSWORD}
DATABASE_SSL_MODE=require

# Connection String for .NET API
ConnectionStrings__DefaultConnection=Host={DB_HOST};Port={DB_PORT};Database=witchcityrope_staging;Username={DB_USER};Password={DB_PASSWORD};SSL Mode=require;Trust Server Certificate=true

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
ASPNETCORE_ENVIRONMENT=Staging
ASPNETCORE_URLS=http://+:8080

# Application Settings
APP_NAME=WitchCityRope Staging
APP_VERSION=1.0.0-staging
APP_ENVIRONMENT=staging

# =============================================================================
# JWT AUTHENTICATION CONFIGURATION
# =============================================================================
# IMPORTANT: Use different secrets from production!
# Use: openssl rand -base64 64
Authentication__JwtSecret=STAGING_SECRET_KEY_DIFFERENT_FROM_PRODUCTION_MINIMUM_64_CHARS_USE_OPENSSL_RAND!
Authentication__Issuer=WitchCityRope-Staging
Authentication__Audience=WitchCityRopeUsers-Staging
Authentication__ExpiryMinutes=60
Authentication__RequireHttps=true

# Cookie Configuration
Authentication__CookieName=WitchCityRope.Auth.Staging
Authentication__CookieDomain=staging.witchcityrope.com
Authentication__CookieSecure=true
Authentication__CookieSameSite=Lax

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
CORS__AllowedOrigins=https://staging.witchcityrope.com
CORS__AllowCredentials=true
CORS__AllowedMethods=GET,POST,PUT,DELETE,OPTIONS
CORS__AllowedHeaders=Content-Type,Authorization,X-Requested-With

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
Security__AllowedHosts=staging.witchcityrope.com
Security__RequireHttps=true
Security__HstsMaxAge=3600
Security__ForceHttpsRedirect=true

# Rate Limiting (more permissive for testing)
Security__RateLimit__RequestsPerMinute=200
Security__RateLimit__BurstSize=20

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
# More verbose logging for staging
Logging__LogLevel__Default=Debug
Logging__LogLevel__Microsoft=Information
Logging__LogLevel__Microsoft.Hosting.Lifetime=Information
Logging__LogLevel__WitchCityRope=Debug

# Structured Logging
Logging__Console__IncludeScopes=true
Logging__Console__TimestampFormat=[yyyy-MM-dd HH:mm:ss]

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
Redis__ConnectionString=localhost:6379
Redis__Database=1
Redis__InstanceName=WitchCityRope-Staging
Redis__AbortOnConnectFail=false

# Session Configuration
Session__TimeoutMinutes=30
Session__CookieName=WitchCityRope.Session.Staging
Session__CookieSecure=true

# =============================================================================
# FILE STORAGE CONFIGURATION
# =============================================================================
Storage__Type=Local
Storage__LocalPath=/app/uploads
Storage__MaxFileSize=5242880
Storage__AllowedExtensions=.jpg,.jpeg,.png,.gif,.pdf,.doc,.docx
Storage__CDNUrl=https://staging.witchcityrope.com/uploads

# For DigitalOcean Spaces Staging (optional)
# Storage__Type=S3Compatible
# Storage__S3__BucketName=witchcityrope-staging-uploads
# Storage__S3__Region=nyc3
# Storage__S3__AccessKey=YOUR_DO_SPACES_KEY
# Storage__S3__SecretKey=YOUR_DO_SPACES_SECRET
# Storage__S3__EndpointUrl=https://nyc3.digitaloceanspaces.com

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================
# Test SMTP Configuration
Email__SmtpHost=smtp.example.com
Email__SmtpPort=587
Email__SmtpUser=staging@witchcityrope.com
Email__SmtpPassword=CHANGE_ME
Email__FromAddress=staging@witchcityrope.com
Email__FromName=WitchCityRope Staging
Email__EnableSsl=true

# Email Templates
Email__TemplateDirectory=/app/templates/emails
Email__BaseUrl=https://staging.witchcityrope.com

# Staging: Send all emails to test address
Email__TestMode=true
Email__TestEmailAddress=staging-test@witchcityrope.com

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# More permissive features for testing
Features__EnableRegistration=true
Features__EnableGuestAccess=true
Features__EnableEventRegistration=true
Features__EnablePayments=false
Features__EnableNotifications=true
Features__MaintenanceMode=false

# Staging-specific features
Features__EnableTestData=true
Features__EnableDebugMode=true
Features__EnableApiDocumentation=true

# =============================================================================
# MONITORING AND TELEMETRY
# =============================================================================
# Application Insights (separate instance for staging)
# ApplicationInsights__ConnectionString=YOUR_STAGING_APP_INSIGHTS_CONNECTION_STRING

# Health Checks
HealthChecks__DatabaseTimeout=30
HealthChecks__RedisTimeout=10
HealthChecks__DetailedErrors=true

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================
# Database Connection Pool (smaller for staging)
Database__MaxPoolSize=20
Database__MinPoolSize=2
Database__ConnectionTimeout=30
Database__CommandTimeout=60

# HTTP Client Configuration
HttpClient__TimeoutSeconds=30
HttpClient__RetryCount=3

# Caching (shorter for testing)
Cache__DefaultExpirationMinutes=30
Cache__SlidingExpirationMinutes=15

# =============================================================================
# ENVIRONMENT SPECIFIC SETTINGS
# =============================================================================
# These settings are specific to the staging environment
ENVIRONMENT_NAME=Staging
SERVER_NAME=witchcityrope-staging
DEPLOYMENT_TIMESTAMP={DEPLOYMENT_TIMESTAMP}

# Docker Configuration
DOCKER_REGISTRY=registry.digitalocean.com/witchcityrope
API_IMAGE_TAG=latest
WEB_IMAGE_TAG=latest

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================
# Test account settings
Testing__EnableTestAccounts=true
Testing__AdminEmail=admin@witchcityrope.com
Testing__AdminPassword=Test123!
Testing__DefaultPassword=Test123!

# Seed data settings
SeedData__EnableAutoSeed=true
SeedData__CreateTestEvents=true
SeedData__CreateTestUsers=true

# =============================================================================
# SECURITY HEADERS (relaxed for staging)
# =============================================================================
Security__ContentSecurityPolicy=default-src 'self' 'unsafe-inline' 'unsafe-eval'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline';
Security__XFrameOptions=SAMEORIGIN
Security__XContentTypeOptions=nosniff
Security__ReferrerPolicy=strict-origin-when-cross-origin

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
Backup__EnableAutomaticBackup=true
Backup__BackupIntervalHours=168
Backup__RetentionDays=7
Backup__EncryptionKey=GENERATE_STAGING_ENCRYPTION_KEY

# =============================================================================
# CUSTOM APPLICATION SETTINGS
# =============================================================================
# Staging-specific settings
App__CommunityName=WitchCityRope Staging
App__Location=Salem, MA (Test)
App__TimeZone=America/New_York
App__DefaultTheme=dark
App__EventCapacityDefault=10
App__RegistrationOpenDays=7

# Staging Environment Indicator
App__StagingBanner=true
App__StagingBannerMessage=This is a staging environment for testing purposes

# Social Links (test)
App__SocialLinks__Facebook=https://facebook.com/witchcityrope-staging
App__SocialLinks__Instagram=https://instagram.com/witchcityrope-staging
App__SocialLinks__Discord=https://discord.gg/witchcityrope-staging

# =============================================================================
# DEVELOPMENT/TESTING HELPERS
# =============================================================================
# Enable additional debugging features
Debug__EnableDetailedErrors=true
Debug__EnableSensitiveDataLogging=false
Debug__EnableServiceProviderValidation=true

# API Documentation
Swagger__Enabled=true
Swagger__Title=WitchCityRope Staging API
Swagger__Version=v1
Swagger__Description=API documentation for WitchCityRope staging environment

# =============================================================================
# NOTES
# =============================================================================
# 1. SECURITY: Use different secrets from production
# 2. TESTING: This environment is for testing and validation
# 3. FEATURES: More permissive settings for testing new features
# 4. VARIABLES: All {VARIABLE} placeholders should be replaced with actual values
# 5. DEBUGGING: More verbose logging and error reporting enabled
# 6. DATABASE: Uses separate staging database
# 7. PERFORMANCE: Smaller resource limits appropriate for testing
# 8. STAGING: Environment clearly marked as staging for identification