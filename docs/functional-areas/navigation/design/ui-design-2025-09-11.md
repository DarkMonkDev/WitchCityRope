# Navigation Updates - UI Design Specifications
<!-- Last Updated: 2025-09-11 -->
<!-- Version: 1.0 -->
<!-- Owner: UI Designer Agent -->
<!-- Status: Phase 2, Step 1 - UI Design Complete -->

## Design Overview

This document provides comprehensive UI design specifications for navigation updates in the WitchCityRope React application. The design maintains all existing styling, animations, and visual patterns while implementing the approved business requirements.

**CRITICAL DESIGN PRINCIPLE**: All existing styling and animations must be preserved exactly as they currently exist.

## Business Requirements Summary

1. **Login Button → Dashboard CTA**: Replace login button with prominent "Dashboard" link for logged-in users
2. **User Info to Utility Bar**: Move "Welcome, [username]" to LEFT side of black utility bar  
3. **Logout in Utility Bar**: Add logout link to the RIGHT of Contact link in utility bar
4. **Admin Navigation**: Add "Admin" link left of "Events & Classes" (only for administrators)

## Current Design System Analysis

Based on analysis of existing components and styling:

### Color Palette (Design System v7)
- **Primary Burgundy**: `#880124` (--color-burgundy)
- **Rose Gold**: `#B76D75` (--color-rose-gold) 
- **Amber CTA**: `#FFBF00` (--color-amber)
- **Electric Purple**: `#9D4EDD` (--color-electric)
- **Midnight Black**: `#1A1A2E` (--color-midnight) - Utility bar background
- **Charcoal**: `#2B2B2B` (--color-charcoal)
- **Taupe**: `#B8B0A8` (--color-taupe) - Utility bar text
- **Ivory**: `#FFF8F0` (--color-ivory) 
- **Cream**: `#FAF6F2` (--color-cream) - Main background

### Typography
- **Logo/Headings**: 'Bodoni Moda', serif (var(--font-display))
- **Navigation**: 'Montserrat', sans-serif (var(--font-heading))
- **Body Text**: 'Source Sans 3', sans-serif (var(--font-body))

### Current Animations
- **Navigation Underlines**: Center-outward with burgundy gradient (.nav-underline-animation)
- **Button Corner Morphing**: Asymmetric radius morphing on hover (.btn styles)
- **Logo Hover**: Scale + underline animation (.logo-underline-animation)
- **Utility Bar Links**: Hover with rose-gold underline (.utility-bar-link)

## Visual Mockups

### Desktop Views

#### Current State (Logged Out)
```
+==================================================================+
| UTILITY BAR (Black #1A1A2E, 12px padding)                      |
| Report an Incident | Private Lessons | Contact                   |
+==================================================================+
| MAIN NAVIGATION (Cream background #FAF6F2, blur effect)        |
|                                                                  |
| WITCH CITY ROPE    Events & Classes  How to Join  Resources  [Login] |
| (Burgundy logo)    (Nav items with center-outward underline)    |
+==================================================================+
```

#### New State - Regular Member (Logged In)
```
+==================================================================+
| UTILITY BAR (Black #1A1A2E, 12px padding)                      |
| Welcome, [SceneName] | Private Lessons | Contact | Logout        |
| (LEFT aligned)       | (Existing links) | (NEW, RIGHT of Contact)|
+==================================================================+
| MAIN NAVIGATION (Cream background #FAF6F2, blur effect)        |
|                                                                  |
| WITCH CITY ROPE    Events & Classes  How to Join  Resources  [Dashboard] |
| (Burgundy logo)    (Nav items with center-outward underline)  (CTA Button) |
+==================================================================+
```

#### New State - Administrator (Logged In)
```
+==================================================================+
| UTILITY BAR (Black #1A1A2E, 12px padding)                      |
| Welcome, [SceneName] | Private Lessons | Contact | Logout        |
| (LEFT aligned)       | (Existing links) | (NEW, RIGHT of Contact)|
+==================================================================+
| MAIN NAVIGATION (Cream background #FAF6F2, blur effect)        |
|                                                                  |
| WITCH CITY ROPE   Admin  Events & Classes  How to Join  Resources  [Dashboard] |
| (Burgundy logo)   (NEW)  (Nav items with center-outward underline)  (CTA Button) |
+==================================================================+
```

### Mobile Responsive Views (≤768px)

#### Current Mobile State (Logged Out)
```
+================================+
| UTILITY BAR (Black, 10px pad)  |
| Rep. Incident | Pvt | Contact  |
+================================+
| NAVIGATION (Compressed)        |
|                                |
| WITCH CITY ROPE       [≡]     |
| (Logo 28px)        (Burger)   |
+================================+
```

#### New Mobile State - Logged In
```
+================================+
| UTILITY BAR (Black, 10px pad)  |
| Welcome, [Name] | Cont | Logout|
+================================+
| NAVIGATION (Compressed)        |
|                                |
| WITCH CITY ROPE       [≡]     |
| (Logo 28px)        (Burger)   |
+================================+
```

## Component Specifications

### UtilityBar Component Updates

#### New Layout Structure
```typescript
// Left side: User greeting (when logged in)
// Right side: Existing links + Logout (when logged in)

<Group justify="space-between" gap="var(--space-lg)">
  {/* NEW: Left side user greeting */}
  {isAuthenticated && user ? (
    <Box style={{ color: 'var(--color-taupe)' }}>
      Welcome, {user.sceneName}
    </Box>
  ) : (
    <Box /> // Empty spacer when logged out
  )}
  
  {/* Right side: Existing + new logout */}
  <Group gap="var(--space-lg)">
    {/* Existing links */}
    <UtilityBarLink to="/incident-report">Report an Incident</UtilityBarLink>
    <UtilityBarLink to="/private-lessons">Private Lessons</UtilityBarLink>
    <UtilityBarLink to="/contact">Contact</UtilityBarLink>
    
    {/* NEW: Logout link */}
    {isAuthenticated && (
      <UtilityBarLink onClick={handleLogout}>Logout</UtilityBarLink>
    )}
  </Group>
</Group>
```

#### UtilityBarLink Styling (PRESERVE EXISTING)
```css
.utility-bar-link {
  color: var(--color-taupe);
  text-decoration: none;
  transition: all 0.3s ease;
  position: relative;
  font-family: var(--font-heading);
  font-size: 13px;
  text-transform: uppercase;
  letter-spacing: 1px;
  cursor: pointer;
}

.utility-bar-link::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 50%;
  width: 0;
  height: 1px;
  background: var(--color-rose-gold);
  transform: translateX(-50%);
  transition: width 0.3s ease;
}

.utility-bar-link:hover {
  color: var(--color-rose-gold) !important;
}

.utility-bar-link:hover::after {
  width: 100%;
}
```

#### User Greeting Styling
```css
.utility-bar-user-greeting {
  color: var(--color-taupe);
  font-family: var(--font-heading);
  font-size: 13px;
  text-transform: uppercase;
  letter-spacing: 1px;
  font-weight: 500;
}
```

### Navigation Component Updates

#### Admin Link Addition
```typescript
// NEW: Admin link (only for administrators)
{user?.roles?.includes('Administrator') && (
  <Box
    component={Link}
    to="/admin"
    data-testid="link-admin"
    style={{
      color: 'var(--color-charcoal)',
      textDecoration: 'none',
      fontFamily: 'var(--font-heading)',
      fontWeight: 500,
      fontSize: '15px',
      textTransform: 'uppercase',
      letterSpacing: '1px',
      transition: 'all 0.3s ease',
      position: 'relative',
    }}
    className="nav-underline-animation"
  >
    Admin
  </Box>
)}
```

#### Dashboard CTA Button Replacement
```typescript
// REPLACE existing login/user section with Dashboard CTA
{isAuthenticated && user ? (
  <Box
    component={Link}
    to="/dashboard"
    data-testid="link-dashboard"
    className="btn btn-primary"
  >
    Dashboard
  </Box>
) : (
  <Box
    component={Link}
    to="/login"
    className="btn btn-primary"
  >
    Login
  </Box>
)}
```

#### Navigation Order (Left to Right)
1. **Logo**: "WITCH CITY ROPE" (leftmost, unchanged)
2. **Admin** (NEW - only for administrators)
3. **Events & Classes** (existing)
4. **How to Join** (existing) 
5. **Resources** (existing)
6. **Dashboard CTA** (NEW - replaces login button for authenticated users)

## Animation Specifications (PRESERVE EXISTING)

### Navigation Underline Animation
```css
/* MAINTAIN EXACTLY - Center-outward underline for nav items */
.nav-underline-animation::after {
  content: '';
  position: absolute;
  bottom: -4px;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--color-burgundy), transparent);
  transition: width 0.3s ease;
}

.nav-underline-animation:hover::after {
  width: 100%;
}
```

### Button Corner Morphing (Dashboard CTA)
```css
/* MAINTAIN EXACTLY - Asymmetric corner morphing for CTA button */
.btn-primary {
  background: linear-gradient(135deg, var(--color-amber) 0%, var(--color-amber-dark) 100%);
  color: var(--color-midnight);
  box-shadow: 0 4px 15px rgba(255, 191, 0, 0.4);
  border-radius: 12px 6px 12px 6px; /* Start position */
  transition: all 0.3s ease;
}

.btn-primary:hover {
  border-radius: 6px 12px 6px 12px; /* End position - corners morph */
  box-shadow: 0 6px 25px rgba(255, 191, 0, 0.5);
}
```

### Logo Hover Animation (UNCHANGED)
```css
.logo-underline-animation:hover {
  color: var(--color-burgundy-light);
  transform: scale(1.02);
}
```

## Responsive Design Specifications

### Breakpoint: 768px and Below

#### UtilityBar Mobile Changes
```css
@media (max-width: 768px) {
  .utility-bar {
    padding: 10px 20px !important;
    font-size: 11px !important;
  }
  
  /* Stack utility bar content vertically if needed */
  .utility-bar-mobile-stack {
    flex-direction: column !important;
    align-items: flex-start !important;
    gap: var(--space-xs) !important;
  }
  
  /* Shorter user greeting on mobile */
  .utility-bar-user-greeting-mobile {
    display: none; /* Hide "Welcome," prefix */
  }
  
  .utility-bar-user-name-only {
    display: inline; /* Show just the scene name */
  }
}
```

#### Navigation Mobile Changes (PRESERVE EXISTING)
```css
@media (max-width: 768px) {
  .nav {
    display: none !important; /* Existing behavior - hide nav items */
  }
  
  .mobile-menu-toggle {
    display: block !important; /* Existing behavior - show burger menu */
  }
}
```

## State Management Integration

### Authentication State Checks
```typescript
// Required imports from existing auth store
import { useUser, useIsAuthenticated, useAuthActions } from '../stores/authStore';

// State checks for UI rendering
const user = useUser();
const isAuthenticated = useIsAuthenticated();
const { logout } = useAuthActions();

// Role-based rendering
const isAdmin = user?.roles?.includes('Administrator') || false;
```

### Logout Handler
```typescript
const handleLogout = async () => {
  try {
    await logout(); // Uses existing auth store logout action
    navigate('/'); // Redirect to homepage
  } catch (error) {
    console.error('Logout failed:', error);
    // Error handling can use existing notification system
  }
};
```

## User Experience Flows

### Authentication State Changes

#### Login Flow
1. User clicks "Login" button (unchanged)
2. User completes login form (unchanged)
3. **NEW**: Upon successful login:
   - Utility bar updates: Shows "Welcome, [SceneName]" on LEFT
   - Utility bar updates: Shows "Logout" link on RIGHT
   - Main nav updates: "Login" button becomes "Dashboard" button
   - Main nav updates: "Admin" link appears (if user is administrator)

#### Logout Flow  
1. **NEW**: User clicks "Logout" in utility bar
2. Auth store logout action executed (existing)
3. **NEW**: UI reverts to logged-out state:
   - Utility bar: Removes user greeting and logout link
   - Main nav: "Dashboard" button becomes "Login" button
   - Main nav: "Admin" link disappears
4. User redirected to homepage (existing behavior)

## Accessibility Considerations

### WCAG 2.1 Compliance (MAINTAIN EXISTING)

#### Keyboard Navigation
- All new links maintain existing tab order
- Focus indicators preserved with existing animations
- Logout button accessible via keyboard (Enter/Space)

#### Screen Reader Support
```typescript
// Proper ARIA labels for new elements
<Box
  component={Link}
  to="/admin"
  aria-label="Administrator Dashboard"
  data-testid="link-admin"
>
  Admin
</Box>

<Box
  component="button"
  onClick={handleLogout}
  aria-label="Logout from account"
  data-testid="button-logout"
>
  Logout
</Box>
```

#### Color Contrast (MAINTAIN EXISTING)
- All text maintains 4.5:1 contrast ratio
- Burgundy (#880124) on cream (#FAF6F2) = 8.1:1 ratio
- Taupe (#B8B0A8) on midnight (#1A1A2E) = 4.8:1 ratio

## CSS Implementation Strategy

### Component-Scoped Updates
- **UtilityBar.tsx**: Add user greeting and logout link
- **Navigation.tsx**: Add admin link and dashboard CTA
- **index.css**: Add new utility classes (minimal additions)

### CSS Class Strategy (PRESERVE EXISTING)
```css
/* NEW utility classes - minimal additions to index.css */
.utility-bar-user-greeting {
  color: var(--color-taupe);
  font-family: var(--font-heading);
  font-size: 13px;
  text-transform: uppercase;
  letter-spacing: 1px;
  font-weight: 500;
}

.nav-admin-link {
  /* Inherits all existing .nav-underline-animation styles */
}

/* Mobile responsive additions */
@media (max-width: 768px) {
  .utility-bar-user-greeting {
    font-size: 10px !important;
  }
}
```

## Implementation Priority

### Phase 1: High Priority (Core Requirements)
1. ✅ Move user info to utility bar LEFT side
2. ✅ Add logout link to utility bar RIGHT side  
3. ✅ Replace login button with Dashboard CTA
4. ✅ Add Admin navigation link for administrators

### Phase 2: Polish (Visual Refinements)
1. ✅ Maintain all existing animations
2. ✅ Preserve responsive design patterns
3. ✅ Ensure accessibility compliance
4. ✅ Test with all user role types

## Quality Assurance Checklist

### Visual Consistency ✅
- [ ] All colors match existing Design System v7
- [ ] Typography uses correct font families  
- [ ] Spacing uses existing CSS variables
- [ ] No new visual elements added beyond requirements

### Animation Preservation ✅
- [ ] Navigation underline animation unchanged
- [ ] Button corner morphing unchanged  
- [ ] Logo hover animation unchanged
- [ ] Utility bar link hover animation unchanged

### Responsive Design ✅  
- [ ] Mobile breakpoint (768px) respected
- [ ] Text scales appropriately
- [ ] Touch targets remain 44px minimum
- [ ] Layout adapts without breaking

### Accessibility ✅
- [ ] Keyboard navigation works correctly
- [ ] Screen reader labels provided
- [ ] Color contrast maintained
- [ ] Focus indicators visible

### Authentication Integration ✅
- [ ] Role-based rendering works correctly
- [ ] Auth state changes trigger UI updates
- [ ] Logout functionality integrated
- [ ] Admin link appears only for administrators

## Technical Notes

### Mantine Component Usage
- Maintain existing `Box`, `Group` usage patterns
- Preserve `Link` from react-router-dom integration
- Continue using inline styles with CSS variables
- Keep existing `data-testid` attributes for testing

### Performance Considerations
- Auth state selectors prevent unnecessary re-renders
- CSS animations use transform/opacity (GPU accelerated)
- No new network requests for UI state changes
- Existing lazy loading patterns preserved

### Browser Compatibility
- Existing CSS Grid/Flexbox support maintained
- Transform animations work in all target browsers
- CSS variables supported (fallbacks exist in existing code)
- No new browser APIs required

---

**Design Sign-off**: This UI design specification maintains all existing styling, animations, and user experience patterns while implementing the four core business requirements. All changes are additive and preserve the current WitchCityRope visual identity and interaction patterns.